/*! jQuery Actionbar - v0.1.0 - 2013-05-30
* https://github.com/jbalboni/jquery-actionbar
* Copyright (c) 2013 Jeff Balboni; Licensed MIT */
(function(n){"use strict";n.fn.actionbar=function(t){function i(t,i){var e=t.append("<menu/>").find("menu"),o=t.append("<menu class='overflow'/>").find("menu.overflow"),a=function(){return t.width()-t.find(".up-button").width()-t.find(".title").width()-t.find(".home-icon").width()-70},l=function(i,e){var o=n(e.html);i.bind("click",function(){o.show()}),t.append(o),i.addClass("view-element")},s=function(i){var s=0,c=null,u=0,r=!1,d=a(),f=function(t,i,e){var o="";return"string"==typeof t&&""!==t&&(o="<img src='"+t+"'/>"),e||(o+="<span class='menu-label'>"+i+"</span>"),n("<li><a href='javascript:void(0);'>"+o+"</a></li>")};e.html(""),o.html("");for(var h=0;i.length>h;h++)c=f(i[h].icon,i[h].label,i[h].show_icon_only),i[h].view&&l(c,i[h].view),e.append(c),s=c.width(),r===!0||u+s>d?(e.find("li:last").remove(),o.append(c).find("img").remove(),r=!0):u+=s;r===!1?t.find(".overflow-button").hide():t.find(".overflow-button").css("display","inline-block")};s(i),n(".overflow-button").on("click",function(){n(".actionbar menu.overflow").toggle()}),n(document).on("click",function(i){var e=n(i.target);e.hasClass("overflow-button")||e.parent().hasClass("overflow-button")||t.find("menu.overflow").hide()}),n(window).on("resize",function(){s(i)}),this.buildMenu=s}function e(t,e,o){var a=n(t);this.menu=null,a.addClass("actionbar"),a.append('<span class="title">'+e+"</span>"),a.append("<a href='javascript:void(0);' class='overflow-button'><img src=\""+o+'"/></a>'),this.createMenu=function(n){this.menu=new i(a,n)},this.addHomeButton=function(n){a.prepend("<a href='javascript:void(0);' class='home-button'><img class=\"home-icon\" src=\""+n+'"/></a>')},this.addUpButton=function(n){a.find(".home-button").prepend('<img class="up-icon" src="'+n+'"/>')},this.setTitle=function(n){a.find(".title").html(n)},this.hideTitle=function(){a.find(".title").hide()}}return t=n.extend({show_home_icon:!1,show_title:!0,overflow_icon:"images/ic_action_overflow.png",title:"jQuery Actionbar"},t),this.each(function(){var n=new e(this,t.title,t.overflow_icon);return t.show_home_icon&&n.addHomeButton(t.home_icon),t.show_up_icon&&n.addUpButton(t.up_icon),t.show_title===!1&&n.hideTitle(),t.menu&&n.createMenu(t.menu),{setTitle:n.setTitle}})}})(jQuery);