/*! jQuery Actionbar - v0.1.0 - 2013-05-28
* https://github.com/jbalboni/jquery-actionbar
* Copyright (c) 2013 Jeff Balboni; Licensed MIT */
(function(n){"use strict";n.fn.actionbar=function(t){function e(t,e){var i=t.append("<menu/>").find("menu"),o=t.append("<menu class='overflow'/>").find("menu.overflow"),a=function(){return t.width()-t.find(".up-button").width()-t.find(".title").width()-t.find(".home-icon").width()-70},s=function(e,i){if("search"===i.type){var o=n("<input type='search' class='search-view'/>");o.attr("placeholder",i.placeholder),e.bind("click",function(){o.show()}),t.append(o),e.addClass("search-view-button")}},c=function(e){var c=0,l=null,r=0,u=!1,d=a(),f=function(t,e,i){var o="";return"string"==typeof t&&""!==t&&(o="<img src='"+t+"'/>"),i||(o+="<span class='menu-label'>"+e+"</span>"),n("<li><a href='javascript:void(0);'>"+o+"</a></li>")};i.html(""),o.html("");for(var h=0;e.length>h;h++)l=f(e[h].icon,e[h].label,e[h].show_icon_only),e[h].view&&s(l,e[h].view),i.append(l),c=l.width(),u===!0||r+c>d?(i.find("li:last").remove(),o.append(l).find("img").remove(),u=!0):r+=c;u===!1?t.find(".overflow-button").hide():t.find(".overflow-button").css("display","inline-block")};c(e),n(".overflow-button").on("click",function(){n(".actionbar menu.overflow").toggle()}),n(document).on("click",function(e){var i=n(e.target);i.hasClass("overflow-button")||i.parent().hasClass("overflow-button")||t.find("menu.overflow").hide()}),n(window).on("resize",function(){c(e)}),this.buildMenu=c}function i(t,i,o){var a=n(t);this.menu=null,a.addClass("actionbar"),a.append('<span class="title">'+i+"</span>"),a.append("<a href='javascript:void(0);' class='overflow-button'><img src=\""+o+'"/></a>'),this.createMenu=function(n){this.menu=new e(a,n)},this.addHomeButton=function(n){a.prepend("<a href='javascript:void(0);' class='home-button'><img class=\"home-icon\" src=\""+n+'"/></a>')},this.addUpButton=function(n){a.prepend("<a href='javascript:void(0);' class='up-button'><img class=\"up-icon\" src=\""+n+'"/></a>')},this.setTitle=function(n){a.find(".title").html(n)},this.hideTitle=function(){a.find(".title").hide()}}return t=n.extend({show_home_icon:!1,show_title:!0,overflow_icon:"images/ic_action_overflow.png",title:"jQuery Actionbar"},t),this.each(function(){var n=new i(this,t.title,t.overflow_icon);return t.show_up_icon&&n.addUpButton(t.up_icon),t.show_home_icon&&n.addHomeButton(t.home_icon),t.show_title===!1&&n.hideTitle(),t.menu&&n.createMenu(t.menu),{setTitle:n.setTitle}})}})(jQuery);