/*! jQuery Actionbar - v0.1.0 - 2013-05-28
* https://github.com/jbalboni/jquery-actionbar
* Copyright (c) 2013 Jeff Balboni; Licensed MIT */
(function(n){"use strict";n.fn.actionbar=function(t){function o(t,o){var i=t.append("<menu/>").find("menu"),e=t.append("<menu class='overflow'/>").find("menu.overflow"),a=function(){return t.width()-t.find(".up-button").width()-t.find(".title").width()-t.find(".home-icon").width()-70},c=function(o){var c=0,s=null,r=0,u=!1,l=a(),f=function(t,o,i){var e="";return"string"==typeof t&&""!==t&&(e="<img src='"+t+"'/>"),i||(e+="<span class='menu-label'>"+o+"</span>"),n("<li><a href='javascript:void(0);'>"+e+"</a></li>")};i.html(""),e.html("");for(var d=0;o.length>d;d++)s=f(o[d].icon,o[d].label,o[d].show_icon_only),i.append(s),c=s.width(),u===!0||r+c>l?(i.find("li:last").remove(),e.append(s).find("img").remove(),u=!0):r+=c;u===!1?t.find(".overflow-button").hide():t.find(".overflow-button").css("display","inline-block")};c(o),n(".overflow-button").on("click",function(){n(".actionbar menu.overflow").toggle()}),n(document).on("click",function(t){var o=n(t.target);o.hasClass("overflow-button")||o.parent().hasClass("overflow-button")||n(".actionbar menu.overflow").hide()}),n(window).on("resize",function(){c(o)}),this.buildMenu=c}function i(t,i,e){var a=n(t);this.menu=null,a.addClass("actionbar"),a.append('<span class="title">'+i+"</span>"),a.append("<a href='javascript:void(0);' class='overflow-button'><img src=\""+e+'"/></a>'),this.createMenu=function(n){this.menu=new o(a,n)},this.addHomeButton=function(n){a.prepend("<a href='javascript:void(0);' class='home-button'><img class=\"home-icon\" src=\""+n+'"/></a>')},this.addUpButton=function(n){a.prepend("<a href='javascript:void(0);' class='up-button'><img class=\"up-icon\" src=\""+n+'"/></a>')},this.setTitle=function(n){a.find(".title").html(n)}}return t=n.extend({show_home_icon:!1,overflow_icon:"images/ic_action_overflow.png",title:"jQuery Actionbar"},t),this.each(function(){var n=new i(this,t.title,t.overflow_icon);return t.show_up_icon&&n.addUpButton(t.up_icon),t.show_home_icon&&n.addHomeButton(t.home_icon),t.menu&&n.createMenu(t.menu),{setTitle:n.setTitle}})}})(jQuery);