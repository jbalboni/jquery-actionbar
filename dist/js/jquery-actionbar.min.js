/*! jQuery Actionbar - v0.1.0 - 2013-05-31
* https://github.com/jbalboni/jquery-actionbar
* Copyright (c) 2013 Jeff Balboni; Licensed MIT */
(function(n){"use strict";n.fn.actionbar=function(t){function i(t,i){var e=t.append("<menu/>").find("menu"),o=t.append("<menu class='overflow'/>").find("menu.overflow"),a=function(){return t.width()-t.find(".up-button").width()-t.find(".title").width()-t.find(".home-icon").width()-70},s=function(i,e){var o=n(e.html);i.bind("click",function(){o.show()}),t.append(o),i.addClass("view-element")},l=function(i){var l=0,u=null,c=0,d=!1,r=a(),f=function(t,i,e){var o="";return"string"==typeof t&&""!==t&&(o="<img src='"+t+"'/>"),e||(o+="<span class='menu-label'>"+i+"</span>"),n("<li><a href='javascript:void(0);'>"+o+"</a></li>")};e.html(""),o.html("");for(var h=0;i.length>h;h++)u=f(i[h].icon,i[h].label,i[h].show_icon_only),i[h].view&&s(u,i[h].view),e.append(u),l=u.width(),d===!0||c+l>r?(e.find("li:last").remove(),o.append(u).find("img").remove(),d=!0):c+=l;d===!1?t.find(".overflow-button").hide():t.find(".overflow-button").css("display","inline-block")};l(i),n(".overflow-button").on("click",function(){n(".actionbar menu.overflow").toggle()}),n(document).on("click",function(i){var e=n(i.target);e.hasClass("overflow-button")||e.parent().hasClass("overflow-button")||t.find("menu.overflow").hide()}),n(window).on("resize",function(){l(i)}),this.buildMenu=l}function e(t,e){var o=n(t);this.menu=null,o.addClass("actionbar"),o.append('<span class="title">'+e+"</span>"),o.append("<a href='javascript:void(0);' class='overflow-button'><img/></a>"),this.createMenu=function(n){this.menu=new i(o,n)},this.addHomeButton=function(n){o.prepend("<a href='javascript:void(0);' class='home-button'><img class=\"home-icon\" src=\""+n+'"/></a>')},this.addUpButton=function(n){o.find(".home-button").prepend('<img class="up-icon" src="'+n+'"/>')},this.setTitle=function(n){o.find(".title").html(n)},this.hideTitle=function(){o.find(".title").hide()}}return t=n.extend({show_home_icon:!1,show_title:!0,title:"jQuery Actionbar"},t),this.each(function(){var n=new e(this,t.title);return t.show_home_icon&&n.addHomeButton(t.home_icon),t.show_up_icon&&n.addUpButton(t.up_icon),t.show_title===!1&&n.hideTitle(),t.menu&&n.createMenu(t.menu),{setTitle:n.setTitle}})}})(jQuery);